{% extends 'main.html' %} {% load static %} {% block content %}
<div class="px-8 w-full max-w-[1350px] mx-auto">
  <!--------------------------------------- mini navbar --------------------------------------->
  <nav
    class="mx-auto py-2 flex justify-between items-center gap-2 items-center text-xs w-full max-w-[1350px]"
  >
    <div class="flex gap-4 items-center">
      <a
        class="hover:text-green-400 transition ease-in duration-300"
        href="{% url 'home' %}"
        ><i class="fa-solid fa-house"></i>
      </a>
      /
      <a
        class="hover:text-green-400 transition ease-in duration-300"
        href="{% url 'forum' %}"
        >Forum</a
      >
      /
      <span class="hidden md:inline text-blue-950 font-black"
        >{{curr_article.title}}</span
      >
    </div>
    <form
      id="search_box"
      class="p-1 w-[400px] max-w-xl border border-2 border-gray-100 rounded-xl flex flex-row justify-between"
    >
      <input
        type="text"
        name="query"
        id="querier"
        required
        class="px-4 py-2 bg-gray-100 text-black w-full rounded-l-lg outline-none"
        placeholder="Recherchez..."
      />
      <button
        class="group px-4 py-2 text-sm bg-blue-950 hover:bg-amber-400 text-white hover:text-black rounded-r-lg transition duration-300 ease-in-out"
        type="submit"
      >
        <i class="fa-solid fa-magnifying-glass"></i>
      </button>
    </form>
  </nav>

  <!--------------------------------------- forum article layout --------------------------------------->

  <div class="my-4 flex flex-col lg:flex-row justify-between items-start gap-8">
    <!--------------------- current forum article -------------------------->

    <div class="relative flex flex-col w-full overflow-hidden">
      {% if curr_article.author == user %}
      <a
        class="absolute top-4 right-4 px-3 py-2 bg-gray-300 hover:bg-white z-30 rounded-full transition duration-300 ease-in-out"
        href="{% url 'edit_forum_article' curr_article.id %}"
        ><i class="fa-solid fa-pen-to-square text-black text-sm"></i
      ></a>
      {% endif %}
      <!--  -->
      {% if not curr_article.image %}
      <img
        class="h-80 w-full rounded-md object-cover"
        src="{% static 'imgs/forum.webp' %}"
        alt="forum article image"
      />
      {% else %}
      <img
        class="h-80 w-full rounded-md object-cover"
        src="{{item.image.url}}"
        alt="forum article image"
      />
      {% endif %}
      <h4 class="mt-4 text-blue-950 text-3xl font-bold">
        {{curr_article.title}}
      </h4>
      <!-- <p class="py-2 text-md">{{curr_article.subtitle}}</p> -->
      <div class="mt-4 p-6 border-2 flex flex-col justify-between rounded-md">
        <p class="text-lg text-gray-700">{{curr_article.content}}</p>
      </div>
    </div>

    <!--------------------------------------- other forum articles --------------------------------------->

    <div class="p-4 h-[400px] w-full lg:w-[400px] bg-gray-100 rounded-md">
      <h3 class="mb-2 mx-auto text-gray-700 text-2xl font-black">
        Autre articles
      </h3>
      <div
        class="flex flex-col md:grid grid-cols-2 lg:grid-cols-1 justify-between gap-8 w-full"
      >
        {% for obj in rel_articles %}
        <div
          class="relative w-full flex flex-col border border-2 bg-white hover:shadow-md rounded-md transition duration-300 ease-in-out overflow-hidden group"
        >
          <a href="{% url 'forum_article' obj.id  %}">
            {% if not item.image %}
            <img
              class="relative h-40 w-full object-cover"
              src="{% static 'imgs/forum.webp' %}"
              alt="forum article image"
            />
            {% else %}
            <img
              class="h-40 w-full object-cover"
              src="{{item.image.url}}"
              alt="forum article image"
            />
            {% endif %}
            <div class="p-4 flex flex-col justify-between">
              <h4 class="text-blue-950 font-bold">
                {{obj.title|truncatechars:30}}
              </h4>
              <p class="py-2 text-sm">{{obj.content|truncatechars:100}}</p>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>

{% endblock %}
